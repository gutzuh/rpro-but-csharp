<UserControl x:Class="RPRO.App.Views.CollectorView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Background="White">

    <Grid Background="White">
        <ScrollViewer VerticalScrollBarVisibility="Auto">
            <StackPanel Margin="24">
                <TextBlock Text="Coletores de Dados" 
                           FontSize="28"
                           FontWeight="Bold"
                           Foreground="#00ACC1"
                           Margin="0,0,0,24"/>
                
                <!-- Status -->
                <Border Background="#F5F5F5" Padding="16" CornerRadius="8" Margin="0,0,0,24">
                    <StackPanel>
                        <TextBlock Text="Status do Coletor" FontWeight="Bold" Margin="0,0,0,12"/>
                        <TextBlock Text="{Binding StatusText}" FontSize="16" FontWeight="Bold" Margin="0,0,0,8"/>
                        <TextBlock Text="{Binding LastRun, StringFormat='Última execução: {0:dd/MM/yyyy HH:mm:ss}'}" 
                                  FontSize="11"
                                  Foreground="Gray"/>
                        <TextBlock Text="{Binding FilesProcessed, StringFormat='Arquivos processados: {0}'}" 
                                  FontSize="11"
                                  Foreground="Gray"
                                  Margin="0,4,0,0"/>
                    </StackPanel>
                </Border>
                
                <!-- Tipo de Coletor -->
                <Border Background="#F5F5F5" Padding="16" CornerRadius="8" Margin="0,0,0,24">
                    <StackPanel>
                        <TextBlock Text="Tipo de Coletor" FontWeight="Bold" Margin="0,0,0,12"/>
                        <StackPanel Orientation="Horizontal">
                            <RadioButton Content="Ração" 
                                        IsChecked="{Binding TipoColetorAtivo, Converter={StaticResource EqualityConverter}, ConverterParameter=racao}"
                                        Margin="0,0,16,0"/>
                            <RadioButton Content="Amendoim" 
                                        IsChecked="{Binding TipoColetorAtivo, Converter={StaticResource EqualityConverter}, ConverterParameter=amendoim}"/>
                        </StackPanel>
                    </StackPanel>
                </Border>
                
                <!-- Ações -->
                <Border Background="#F5F5F5" Padding="16" CornerRadius="8" Margin="0,0,0,24">
                    <StackPanel>
                        <TextBlock Text="Ações" FontWeight="Bold" Margin="0,0,0,12"/>
                        <StackPanel Orientation="Horizontal">
                            <Button Command="{Binding StartCollectorCommand}" 
                                   Content="Iniciar" 
                                   Padding="12,6"
                                   Margin="0,0,8,0"/>
                            <Button Command="{Binding StopCollectorCommand}" 
                                   Content="Parar" 
                                   Padding="12,6"
                                   Margin="0,0,8,0"/>
                            <Button Command="{Binding RunManualCollectionCommand}" 
                                   Content="Executar Agora" 
                                   Padding="12,6"
                                   Margin="0,0,8,0"/>
                            <Button Command="{Binding TestConnectionCommand}" 
                                   Content="Testar Conexão" 
                                   Padding="12,6"/>
                        </StackPanel>
                    </StackPanel>
                </Border>
                
                <!-- Resultado do Teste -->
                <Border Background="#E3F2FD" 
                       CornerRadius="8" 
                       Padding="16"
                       Visibility="{Binding TestResult, Converter={StaticResource StringToVisibilityConverter}}"
                       Margin="0,0,0,24">
                    <TextBlock Text="{Binding TestResult}" 
                              Foreground="#0D47A1"
                              TextWrapping="Wrap"/>
                </Border>
                
                <!-- Loading -->
                <StackPanel Margin="0,0,0,24"
                           Visibility="{Binding IsTesting, Converter={StaticResource BooleanToVisibilityConverter}}">
                    <ProgressBar IsIndeterminate="True" Height="4" Margin="0,0,0,8"/>
                    <TextBlock Text="Testando..." Foreground="Gray"/>
                </StackPanel>
            </StackPanel>
        </ScrollViewer>
    </Grid>
</UserControl>